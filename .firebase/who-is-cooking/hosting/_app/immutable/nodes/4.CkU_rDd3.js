import{d as L,k as ne,a as T,v as N,j as re,x as le,u as ie}from"../chunks/firebase.Bwij6Kdv.js";import{H as ce}from"../chunks/control.CYgJF_JY.js";import{s as U,x as K,i as E,f as v,Q as fe,e as x,c as C,v as j,o as g,n as A,b as y,m as de,a as D,g as $,z as W,h as b,w as O,B as X,u as ue,p as me,q as he,r as se,t as _e,d as ge,j as pe,k as Y}from"../chunks/scheduler.CxO4csHG.js";import{S as q,i as z,g as J,a as P,e as Q,t as w,c as I,b as V,m as B,d as M}from"../chunks/index.BqBZE8_s.js";import{A as ke}from"../chunks/AuthCheck.hDg632WA.js";import{f as be,c as ve,b as xe}from"../chunks/index.ChZz6XMy.js";import{e as Z,u as Ce,f as we}from"../chunks/each.DLoRWcad.js";import{C as Pe}from"../chunks/Confetti.wDXda6tx.js";function ye(n,e){throw new ce(n,e)}new TextEncoder;async function Se(){const n=[{name:"Matt",defaultPosition:0,cooked:!1,id:"bd"},{name:"Henry",defaultPosition:1,cooked:!1,id:"davies"},{name:"James",defaultPosition:2,cooked:!1,id:"fussey"},{name:"Pelayo",defaultPosition:3,cooked:!1,id:"rat"},{name:"Rob",defaultPosition:4,cooked:!1,id:"temu"},{name:"Hugo",defaultPosition:5,cooked:!1,id:"jordan"},{name:"Paul",defaultPosition:6,cooked:!1,id:"mao"}],e=L(T,"rotor","267rotor");N(e,{Order:n})}const Oe=async()=>{var t;const n=L(T,"rotor","267rotor"),e=await ne(n);if(!e.exists())throw ye(404,"that user does not exist!");return e.data().Order.every(o=>o.cooked===!0)&&setTimeout(Se,5e3),{array:(t=e.data())==null?void 0:t.Order}},Xe=Object.freeze(Object.defineProperty({__proto__:null,load:Oe},Symbol.toStringTag,{value:"Module"}));function ee(n,e,t){const o=n.slice();return o[9]=e[t],o[11]=t,o}const De=n=>({item:n&1,index:n&1}),te=n=>({item:n[9],index:n[11]});function $e(n){let e,t="No items";return{c(){e=x("p"),e.textContent=t,this.h()},l(o){e=C(o,"P",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1ideuqf"&&(e.textContent=t),this.h()},h(){g(e,"class","my-12 text-center text-lg font-bold")},m(o,r){E(o,e,r)},p:A,i:A,o:A,d(o){o&&v(e)}}}function Ee(n){let e,t=[],o=new Map,r,l=Z(n[0]);const i=s=>s[9].id;for(let s=0;s<l.length;s+=1){let a=ee(n,l,s),c=i(a);o.set(c,t[s]=ae(c,a))}return{c(){e=x("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=C(s,"UL",{class:!0});var a=y(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(v),this.h()},h(){g(e,"class","flex list-none flex-col items-center p-0")},m(s,a){E(s,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(s,a){if(a&63){l=Z(s[0]),J();for(let c=0;c<t.length;c+=1)t[c].r();t=Ce(t,a,i,1,s,l,o,e,we,ae,null,ee);for(let c=0;c<t.length;c+=1)t[c].a();Q()}},i(s){if(!r){for(let a=0;a<l.length;a+=1)w(t[a]);r=!0}},o(s){for(let a=0;a<t.length;a+=1)P(t[a]);r=!1},d(s){s&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ae(n,e){let t,o,r,l,i,s=A,a,c,d;const p=e[6].default,f=de(p,e,e[5],te);return{key:n,first:null,c(){t=x("li"),f&&f.c(),o=D(),this.h()},l(u){t=C(u,"LI",{class:!0,"data-index":!0,"data-id":!0,draggable:!0});var h=y(t);f&&f.l(h),o=$(h),h.forEach(v),this.h()},h(){g(t,"class","w-full max-w-md border-2 border-dashed border-transparent p-2 transition-all svelte-16x08xz"),g(t,"data-index",r=e[11]),g(t,"data-id",l=e[9].id),g(t,"draggable","true"),W(t,"over",e[9].id===e[1]),this.first=t},m(u,h){E(u,t,h),f&&f.m(t,null),b(t,o),a=!0,c||(d=[O(t,"dragstart",Le),O(t,"dragover",X(e[2])),O(t,"dragleave",e[3]),O(t,"drop",X(e[4]))],c=!0)},p(u,h){e=u,f&&f.p&&(!a||h&33)&&ue(f,p,e,e[5],a?he(p,e[5],h,De):me(e[5]),te),(!a||h&1&&r!==(r=e[11]))&&g(t,"data-index",r),(!a||h&1&&l!==(l=e[9].id))&&g(t,"data-id",l),(!a||h&3)&&W(t,"over",e[9].id===e[1])},r(){i=t.getBoundingClientRect()},f(){be(t),s()},a(){s(),s=ve(t,i,xe,{duration:300})},i(u){a||(w(f,u),a=!0)},o(u){P(f,u),a=!1},d(u){u&&v(t),f&&f.d(u),c=!1,se(d)}}}function Re(n){let e,t,o,r;const l=[Ee,$e],i=[];function s(a,c){var d;return(d=a[0])!=null&&d.length?0:1}return e=s(n),t=i[e]=l[e](n),{c(){t.c(),o=K()},l(a){t.l(a),o=K()},m(a,c){i[e].m(a,c),E(a,o,c),r=!0},p(a,[c]){let d=e;e=s(a),e===d?i[e].p(a,c):(J(),P(i[d],1,1,()=>{i[d]=null}),Q(),t=i[e],t?t.p(a,c):(t=i[e]=l[e](a),t.c()),w(t,1),t.m(o.parentNode,o))},i(a){r||(w(t),r=!0)},o(a){P(t),r=!1},d(a){a&&v(o),i[e].d(a)}}}function H(n){return n.dataset.index?{...n.dataset}:H(n.parentNode)}function Le(n){var t;const e=H(n.target);(t=n.dataTransfer)==null||t.setData("source",e==null?void 0:e.index.toString())}function Te(n,e,t){let{$$slots:o={},$$scope:r}=e,{list:l}=e,i=!1;const s=fe();function a(f){var h;(h=f.target.dataset)==null||h.id;const u=H(f.target);t(1,i=(u==null?void 0:u.id)??!1)}function c(f){const u=H(f.target);i===u.id&&t(1,i=!1)}function d(f){var h;t(1,i=!1);const u=H(f.target);p({from:(h=f.dataTransfer)==null?void 0:h.getData("source"),to:u.index})}const p=({from:f,to:u})=>{const h=[...l];h[f]=[h[u],h[u]=h[f]][0],s("sorty",h)};return n.$$set=f=>{"list"in f&&t(0,l=f.list),"$$scope"in f&&t(5,r=f.$$scope)},[l,i,a,c,d,r,o]}class je extends q{constructor(e){super(),z(this,e,Te,Re,U,{list:0})}}function oe(n){let e,t;return e=new Pe({}),{c(){I(e.$$.fragment)},l(o){V(e.$$.fragment,o)},m(o,r){B(e,o,r),t=!0},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function He(n){let e,t,o,r,l,i,s,a="Cooked/ Unavailable",c,d,p,f,u,h,S,m=n[2]&&oe();return{c(){e=x("a"),t=x("p"),o=_e(n[0]),r=D(),l=x("div"),i=x("label"),s=x("span"),s.textContent=a,c=D(),d=x("input"),p=D(),m&&m.c(),this.h()},l(_){e=C(_,"A",{class:!0});var k=y(e);t=C(k,"P",{class:!0});var F=y(t);o=ge(F,n[0]),F.forEach(v),r=$(k),l=C(k,"DIV",{class:!0});var G=y(l);i=C(G,"LABEL",{class:!0});var R=y(i);s=C(R,"SPAN",{class:!0,"data-svelte-h":!0}),j(s)!=="svelte-1hpt7xr"&&(s.textContent=a),c=$(R),d=C(R,"INPUT",{type:!0,class:!0}),p=$(R),m&&m.l(R),R.forEach(v),G.forEach(v),k.forEach(v),this.h()},h(){g(t,"class","text-2xl font-bold"),g(s,"class","label-text"),g(d,"type","checkbox"),d.checked=n[1],g(d,"class","checkbox-primary checkbox"),g(i,"class","label cursor-pointer"),g(l,"class","form-control"),g(e,"class",f=`not-prose stack flex w-full min-w-80 max-w-md items-center justify-center rounded-lg border bg-base-300 p-4 text-center no-underline ${n[1]?"border-green-500":"border-white"}`)},m(_,k){E(_,e,k),b(e,t),b(t,o),b(e,r),b(e,l),b(l,i),b(i,s),b(i,c),b(i,d),b(i,p),m&&m.m(i,null),u=!0,h||(S=O(d,"click",n[3]),h=!0)},p(_,[k]){(!u||k&1)&&pe(o,_[0]),(!u||k&2)&&(d.checked=_[1]),_[2]?m?k&4&&w(m,1):(m=oe(),m.c(),w(m,1),m.m(i,null)):m&&(J(),P(m,1,1,()=>{m=null}),Q()),(!u||k&2&&f!==(f=`not-prose stack flex w-full min-w-80 max-w-md items-center justify-center rounded-lg border bg-base-300 p-4 text-center no-underline ${_[1]?"border-green-500":"border-white"}`))&&g(e,"class",f)},i(_){u||(w(m),u=!0)},o(_){P(m),u=!1},d(_){_&&v(e),m&&m.d(),h=!1,S()}}}function Ne(n,e,t){let o,{name:r="placeholder"}=e,{index:l}=e,{handleCheck:i}=e,{checkedStatus:s}=e,{id:a}=e;async function c(){const d=L(T,"rotor","267rotor"),p=await ne(d);if(p.exists()){const f=p.data().Order,u=f.findIndex(h=>h.id===a);if(u!==-1){const S=!f[u].cooked;f[u].cooked=S,await re(d,{Order:f})}}}return n.$$set=d=>{"name"in d&&t(0,r=d.name),"index"in d&&t(4,l=d.index),"handleCheck"in d&&t(5,i=d.handleCheck),"checkedStatus"in d&&t(1,s=d.checkedStatus),"id"in d&&t(6,a=d.id)},n.$$.update=()=>{n.$$.dirty&2&&t(2,o=s)},[r,s,o,c,l,i,a]}class Ae extends q{constructor(e){super(),z(this,e,Ne,He,U,{name:0,index:4,handleCheck:5,checkedStatus:1,id:6})}}function Ie(n){let e,t,o;return t=new Ae({props:{id:n[5].id,name:n[5].name,index:n[6]+1,checkedStatus:n[5].cooked,handleCheck:Me}}),{c(){e=x("div"),I(t.$$.fragment),this.h()},l(r){e=C(r,"DIV",{class:!0});var l=y(e);V(t.$$.fragment,l),l.forEach(v),this.h()},h(){g(e,"class","group relative")},m(r,l){E(r,e,l),B(t,e,null),o=!0},p(r,l){const i={};l&32&&(i.id=r[5].id),l&32&&(i.name=r[5].name),l&64&&(i.index=r[6]+1),l&32&&(i.checkedStatus=r[5].cooked),t.$set(i)},i(r){o||(w(t.$$.fragment,r),o=!0)},o(r){P(t.$$.fragment,r),o=!1},d(r){r&&v(e),M(t)}}}function Ve(n){let e,t,o="Cooking Rota",r,l,i,s,a,c="Re-order rota",d,p,f="Hard reset rota",u,h,S;return l=new je({props:{list:n[0].Order,$$slots:{default:[Ie,({item:m,index:_})=>({5:m,6:_}),({item:m,index:_})=>(m?32:0)|(_?64:0)]},$$scope:{ctx:n}}}),l.$on("sorty",n[1]),{c(){e=x("main"),t=x("h1"),t.textContent=o,r=D(),I(l.$$.fragment),i=D(),s=x("div"),a=x("button"),a.textContent=c,d=D(),p=x("button"),p.textContent=f,this.h()},l(m){e=C(m,"MAIN",{class:!0});var _=y(e);t=C(_,"H1",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1y66r94"&&(t.textContent=o),r=$(_),V(l.$$.fragment,_),i=$(_),s=C(_,"DIV",{class:!0});var k=y(s);a=C(k,"BUTTON",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-1spidb8"&&(a.textContent=c),d=$(k),p=C(k,"BUTTON",{class:!0,"data-svelte-h":!0}),j(p)!=="svelte-11nvtcx"&&(p.textContent=f),k.forEach(v),_.forEach(v),this.h()},h(){g(t,"class","text-2xl font-bold"),g(a,"class","btn btn-accent w-full"),g(p,"class","btn btn-warning w-full"),g(s,"class","flex flex-col gap-4 w-full"),g(e,"class","m-auto mx-auto flex max-w-xl flex-col items-center gap-6 py-9")},m(m,_){E(m,e,_),b(e,t),b(e,r),B(l,e,null),b(e,i),b(e,s),b(s,a),b(s,d),b(s,p),u=!0,h||(S=[O(a,"click",n[2]),O(p,"click",n[3])],h=!0)},p(m,_){const k={};_&1&&(k.list=m[0].Order),_&224&&(k.$$scope={dirty:_,ctx:m}),l.$set(k)},i(m){u||(w(l.$$.fragment,m),u=!0)},o(m){P(l.$$.fragment,m),u=!1},d(m){m&&v(e),M(l),h=!1,se(S)}}}function Be(n){let e,t;return e=new ke({props:{$$slots:{default:[Ve]},$$scope:{ctx:n}}}),{c(){I(e.$$.fragment)},l(o){V(e.$$.fragment,o)},m(o,r){B(e,o,r),t=!0},p(o,[r]){const l={};r&129&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}async function Me(n,e){console.log(n,e),console.log(e)}function Ue(n,e,t){let o;Y(n,le,s=>t(0,o=s)),Y(n,ie,s=>t(4,s));function r(s){const a=s.detail,c=L(T,"rotor","267rotor");N(c,{Order:a},{merge:!0})}function l(){const s=o.Order.sort((c,d)=>c.defaultPosition-d.defaultPosition),a=L(T,"rotor","267rotor");N(a,{Order:s},{merge:!0})}function i(){const s=[{name:"Matt",defaultPosition:0,cooked:!1,id:"bd"},{name:"Henry",defaultPosition:1,cooked:!1,id:"davies"},{name:"James",defaultPosition:2,cooked:!1,id:"fussey"},{name:"Pelayo",defaultPosition:3,cooked:!1,id:"rat"},{name:"Rob",defaultPosition:4,cooked:!1,id:"temu"},{name:"Hugo",defaultPosition:5,cooked:!1,id:"jordan"},{name:"Paul",defaultPosition:6,cooked:!1,id:"mao"}],a=L(T,"rotor","267rotor");N(a,{Order:s})}return[o,r,l,i]}class Ye extends q{constructor(e){super(),z(this,e,Ue,Be,U,{})}}export{Ye as component,Xe as universal};
